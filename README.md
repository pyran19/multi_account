# 複数アカウントにおけるレートマッチング最適戦略

<p align="center">
  <img src="https://user-images.githubusercontent.com/placeholder/elo.png" width="400" alt="illustration"/>
</p>

本リポジトリでは、**複数アカウントを保有するプレイヤーが、限られた試合数でどのようにレート戦へ参加すれば最終レート（シーズン終了時に最も高いアカウントのレート）の期待値を最大化できるか**を、理論計算と数値シミュレーションの両面から解析します。

---

## 1. 背景と課題
多くのオンラインゲームでは Elo をベースにしたレーティングが用いられ、シーズン終了時の"瞬間レート"でランキングが決まります。複数アカウントを同時運用する場合、**最も高いレートを持つアカウントだけが順位に反映される**ため、

* どのタイミングでどのアカウントを出すべきか？
* 途中で"打ち止め"にして確定すべきか？

といった戦略が総合レートの期待値に影響します。本プロジェクトはこれを**動的計画法 (DP) による逐次最適化**で厳密に評価し、Monte-Carlo シミュレーションで検証します。

---

## 2. 解析モデル
1. レート変動: 1 試合ごとに固定値 $\pm 16$ 増減。
2. 勝率関数: 線形近似 $p(r)=0.5 - k (r - \mu)$。適正レート $\mu$ に収束するイメージ。
3. 各アカウントは同じ $\mu$ を共有し、初期レートから $N_0$ 試合で近傍に到達後、"揺らぎ"フェーズに入ると仮定。
4. 全アカウントの総試合数に上限 $N$ を設け、途中で打ち切ることも可能。
5. 終了時は最大レートを採用。

詳細な数式は `document/permanent/期待値逐次解法.md` を参照してください。

---

## 3. リポジトリ構成
```
├── document/
│   ├── fleeting/   # アイデアメモ（走り書き）
│   ├── ai/         # 実装計画など自動生成ドキュメント
│   └── permanent/  # 確定仕様・最終レポート
│
└── src/            # 実装コード
    ├── core/       # DP・数式処理
    ├── simulator/  # Monte-Carlo シミュレーション
    └── tests/      # pytest
```

---

## 4. 今後のロードマップ
- [ ] ドキュメント整備
  - [x] 下書き（fleeting）
  - [x] AI による清書（current）
  - [x] レビュー後 permanent へ昇格
- [x] 期待値 DP モジュール実装
- [x] シミュレーション実装
- [ ] 小規模ケースでの検証
- [ ] 大規模実験 & 可視化
- [ ] 考察・レポートまとめ

